/**
 * LookingGlass - User friendly PHP Looking Glass
 *
 * @package     LookingGlass
 * @author      Nick Adams <nick89@zoho.com>
 * @copyright   2012 Nick Adams.
 * @link        http://iamtelephone.com
 * @license     http://opensource.org/licenses/MIT MIT License
 * @version     2.0.0
 */
function stickyFooter(){var a=$("footer").hasClass("navbar")&&$("#results").is(":visible")?$(window).height()-($("footer").height()+10):$(window).height();a>=$(document).height()?$("footer").addClass("navbar navbar-fixed-bottom"):$("footer").removeClass("navbar navbar-fixed-bottom")}function equalize(){$(".block").height("auto"),maxHeight=Math.max.apply(Math,$(".block").map(function(){return $(this).height()}).get()),$(".block").height(maxHeight)}$(document).ready(function(){equalize(),stickyFooter(),$("#cmd").change(function(){$("#address4 option, #address6 option").length>0&&("mtr"==$(this).val()?$("#address4").css("display","inline"):$("#address4").hide(),"mtr6"==$(this).val()?$("#address6").css("display","inline"):$("#address6").hide())}),$("#networktest").submit(function(){var a=$("input[name=host]").val(),b=$("select[name=cmd]").val(),c="cmd="+b+"&host="+a+"&location="+$("input[name=location]").val()+"&id="+$("input[name=id]").val();if("mtr"==b&&null!==$("#address4").val()?c=c+"&address="+$("#address4").val():"mtr6"==b&&null!==$("#address6").val()&&(c=c+"&address="+$("#address6").val()),""===a)$("#host-error").addClass("error"),$("#results, #results-title").hide(),stickyFooter();else{$("#submit").attr("disabled","true").text("Loading..."),$(".icon-spinner").addClass("icon-spin").css("display","inline-block"),$("#response").empty(),$("html, body").animate({scrollTop:$(document).height()},2e3);var d=new XMLHttpRequest;d.open("GET","ajax.php?"+c,!0),d.send(null);var e=0,f=0,g="",h=window.setInterval(function(){d.readyState==XMLHttpRequest.DONE&&(window.clearTimeout(h),$("#submit").removeAttr("disabled").text("Run Test"),$(".icon-spinner").removeClass("icon-spin").hide()),"Unauthorized request"==d.responseText?($("#results, #results-title").hide(),$("#host-error").addClass("error"),stickyFooter()):""!==d.responseText&&(1>e&&($("#host-error").removeClass("error"),$("#results, #results-title").show()),g=d.responseText.replace(/<br>\s+/g,"<br>"),$("#response").append(g.substring(f)),stickyFooter(),f=g.length,e++)},500)}return!1}),stickyFooter()}),$(window).resize(function(){equalize(),stickyFooter()}),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.collapse.defaults,c),this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.prototype={constructor:b,dimension:function(){var a=this.$element.hasClass("width");return a?"width":"height"},show:function(){var b,c,d,e;if(!this.transitioning&&!this.$element.hasClass("in")){if(b=this.dimension(),c=a.camelCase(["scroll",b].join("-")),d=this.$parent&&this.$parent.find("> .accordion-group > .in"),d&&d.length){if(e=d.data("collapse"),e&&e.transitioning)return;d.collapse("hide"),e||d.data("collapse",null)}this.$element[b](0),this.transition("addClass",a.Event("show"),"shown"),a.support.transition&&this.$element[b](this.$element[0][c])}},hide:function(){var b;!this.transitioning&&this.$element.hasClass("in")&&(b=this.dimension(),this.reset(this.$element[b]()),this.transition("removeClass",a.Event("hide"),"hidden"),this.$element[b](0))},reset:function(a){var b=this.dimension();return this.$element.removeClass("collapse")[b](a||"auto")[0].offsetWidth,this.$element[null!==a?"addClass":"removeClass"]("collapse"),this},transition:function(b,c,d){var e=this,f=function(){"show"==c.type&&e.reset(),e.transitioning=0,e.$element.trigger(d)};this.$element.trigger(c),c.isDefaultPrevented()||(this.transitioning=1,this.$element[b]("in"),a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,f):f())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("collapse"),f=a.extend({},a.fn.collapse.defaults,d.data(),"object"==typeof c&&c);e||d.data("collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.collapse.defaults={toggle:!0},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this},a(document).on("click.collapse.data-api","[data-toggle=collapse]",function(b){var d,c=a(this),e=c.attr("data-target")||b.preventDefault()||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),f=a(e).data("collapse")?"toggle":c.data();c[a(e).hasClass("in")?"addClass":"removeClass"]("collapsed"),a(e).collapse(f)})}(window.jQuery),function(){function e(){this._object=a&&!d?new a:new window.ActiveXObject("Microsoft.XMLHTTP"),this._listeners=[]}function f(){return new e}function g(a){if(a._object.send(a._data),b&&!a._async)for(a.readyState=f.OPENED,j(a);a.readyState<f.DONE;)if(a.readyState++,h(a),a._aborted)return}function h(a){f.onreadystatechange&&f.onreadystatechange.apply(a),a.dispatchEvent({type:"readystatechange",bubbles:!1,cancelable:!1,timeStamp:new Date+0})}function i(a){var b=a.responseXML,d=a.responseText;return c&&d&&b&&!b.documentElement&&a.getResponseHeader("Content-Type").match(/[^\/]+\/[^\+]+\+xml/)&&(b=new window.ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.validateOnParse=!1,b.loadXML(d)),b&&(c&&0!==b.parseError||!b.documentElement||b.documentElement&&"parsererror"==b.documentElement.tagName)?null:b}function j(a){try{a.responseText=a._object.responseText}catch(b){}try{a.responseXML=i(a._object)}catch(b){}try{a.status=a._object.status}catch(b){}try{a.statusText=a._object.statusText}catch(b){}}function k(a){a._object.onreadystatechange=new window.Function}var a=window.XMLHttpRequest,b=!!window.controllers,c=window.document.all&&!window.opera,d=c&&window.navigator.userAgent.match(/MSIE 7.0/);f.prototype=e.prototype,b&&a.wrapped&&(f.wrapped=a.wrapped),f.UNSENT=0,f.OPENED=1,f.HEADERS_RECEIVED=2,f.LOADING=3,f.DONE=4,f.prototype.UNSENT=f.UNSENT,f.prototype.OPENED=f.OPENED,f.prototype.HEADERS_RECEIVED=f.HEADERS_RECEIVED,f.prototype.LOADING=f.LOADING,f.prototype.DONE=f.DONE,f.prototype.readyState=f.UNSENT,f.prototype.responseText="",f.prototype.responseXML=null,f.prototype.status=0,f.prototype.statusText="",f.prototype.priority="NORMAL",f.prototype.onreadystatechange=null,f.onreadystatechange=null,f.onopen=null,f.onsend=null,f.onabort=null,f.prototype.open=function(a,d,e,g,i){var l=a.toLowerCase();if("connect"==l||"trace"==l||"track"==l)throw Error(18);delete this._headers,3>arguments.length&&(e=!0),this._async=e;var m=this,n=this.readyState,o=null;c&&e&&(o=function(){n!=f.DONE&&(k(m),m.abort())},window.attachEvent("onunload",o)),f.onopen&&f.onopen.apply(this,arguments),arguments.length>4?this._object.open(a,d,e,g,i):arguments.length>3?this._object.open(a,d,e,g):this._object.open(a,d,e),this.readyState=f.OPENED,h(this),this._object.onreadystatechange=function(){return!b||e?(m.readyState=m._object.readyState,j(m),m._aborted?(m.readyState=f.UNSENT,void 0):(m.readyState==f.DONE&&(delete m._data,k(m),c&&e&&window.detachEvent("onunload",o),n!=m.readyState&&h(m),n=m.readyState),void 0)):void 0}},f.prototype.send=function(a){f.onsend&&f.onsend.apply(this,arguments),arguments.length||(a=null),a&&a.nodeType&&(a=window.XMLSerializer?(new window.XMLSerializer).serializeToString(a):a.xml,this._headers["Content-Type"]||this._object.setRequestHeader("Content-Type","application/xml")),this._data=a,g(this)},f.prototype.abort=function(){f.onabort&&f.onabort.apply(this,arguments),this.readyState>f.UNSENT&&(this._aborted=!0),this._object.abort(),k(this),this.readyState=f.UNSENT,delete this._data},f.prototype.getAllResponseHeaders=function(){return this._object.getAllResponseHeaders()},f.prototype.getResponseHeader=function(a){return this._object.getResponseHeader(a)},f.prototype.setRequestHeader=function(a,b){return this._headers||(this._headers={}),this._headers[a]=b,this._object.setRequestHeader(a,b)},f.prototype.addEventListener=function(a,b,c){for(var e,d=0;e=this._listeners[d];d++)if(e[0]==a&&e[1]==b&&e[2]==c)return;this._listeners.push([a,b,c])},f.prototype.removeEventListener=function(a,b,c){for(var e,d=0;(e=this._listeners[d])&&(e[0]!=a||e[1]!=b||e[2]!=c);d++);e&&this._listeners.splice(d,1)},f.prototype.dispatchEvent=function(a){var b={type:a.type,target:this,currentTarget:this,eventPhase:2,bubbles:a.bubbles,cancelable:a.cancelable,timeStamp:a.timeStamp,stopPropagation:function(){},preventDefault:function(){},initEvent:function(){}};"readystatechange"==b.type&&this.onreadystatechange&&(this.onreadystatechange.handleEvent||this.onreadystatechange).apply(this,[b]);for(var d,c=0;d=this._listeners[c];c++)d[0]!=b.type||d[2]||(d[1].handleEvent||d[1]).apply(this,[b])},f.prototype.toString=function(){return"[object XMLHttpRequest]"},f.toString=function(){return"[XMLHttpRequest]"},window.Function.prototype.apply||(window.Function.prototype.apply=function(a,b){b||(b=[]),a.__func=this,a.__func(b[0],b[1],b[2],b[3],b[4]),delete a.__func}),window.XMLHttpRequest=f}();